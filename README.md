# 🛡️ FaceGuard AI – Identity & Deepfake Protection

This project allows you to record or upload a face video, extract frames, crop real face images, and generate deepfake-style face swaps using [SimSwap](https://github.com/neuralchen/SimSwap) — all through a simple web UI powered by Gradio.

---

## 🚀 Features So Far

- 📹 Record or upload video via UI
- 🔼️ Extract frames from the video
- 👤 Crop and save face images
- 🧪 Generate deepfakes using SimSwap (via subprocess)
- 💻 Gradio-based UI, modular backend

---

## 🧹 Project Structure

```bash
faceguard_ai/
├── app/
│   ├── ui.py                 # Gradio interface logic
│   ├── frame_extractor.py    # Frame extraction logic
│   ├── face_cropper.py       # Face detection and cropping
│   ├── simswap_runner.py     # Triggers SimSwap using subprocess
├── run_app.py                # Launches the Gradio UI
├── simswap_new/              # Cloned SimSwap repo
│   └── videos/               # Stores user videos (raw & re-encoded)
├── faces/                    # Stores real and fake face images
│   └── <username>/
│       ├── real/             # Cropped real face images
│       └── fake/             # Deepfake images generated by SimSwap
├── frames/                   # Raw frames extracted from each video
├── requirements-faceguard.txt
├── requirements-simswap.txt
└── README.md
```

---

## 📦 Setup


### Create and activate two environments:

#### 🟩 FaceGuard Env:
```bash
conda create -n faceguard python=3.9
conda activate faceguard
pip install -r requirements-faceguard.txt
```

#### 🟦 SimSwap Env:
```bash
conda create -n simswap python=3.9
conda activate simswap
pip install -r requirements-simswap.txt
```

> 💡 FFmpeg must be installed system-wide and available in your PATH.

---

## ▶️ How to Run

From the project root directory:

```bash
conda activate faceguard
python run_app.py
```

Then open your browser at:  
📍 `http://127.0.0.1:7860`

---

## 📂 Where Output Files Are Stored

| Output Type      | Location                             | Description                              |
|------------------|--------------------------------------|------------------------------------------|
| 📹 Raw Videos     | `simswap_new/videos/<user>/`         | Original + re-encoded videos              |
| 🔼️ Extracted Frames | `frames/<user>/`                      | Every 5th frame from re-encoded video     |
| 👤 Real Faces     | `faces/<user>/real/`                 | Cropped faces detected from frames       |
| 🧪 Fake Faces     | `faces/<user>/fake/`                 | SimSwap-generated deepfake images        |

---

## ✅ Notes

- Only videos with `.mp4` extension are supported (auto-re-encoded).
- SimSwap runs in a separate subprocess using the `simswap` environment.
- Identity images for face swaps should be placed in:
  ```
  simswap_new/utils/faceswap_identities/
  ```

---

## 🛠️ Next Steps (Planned)

- 🔍 Add real-vs-fake classification with Xception
- 📸 Show fake image previews in the UI
- 🧪 Train per-user anti-deepfake detector
- 🗃️ Export user datasets (real + fake) in zip format

---

## 🧠 Credits

- SimSwap by [neuralchen](https://github.com/neuralchen/SimSwap)
- Face detection powered by MTCNN
- UI powered by Gradio

---

## 🔒 Disclaimer

This project is for academic and research purposes only. Deepfake technology should always be used ethically and responsibly.
