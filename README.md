# ğŸ›¡ï¸ FaceGuard AI â€“ Identity & Deepfake Protection

This project allows you to record or upload a face video, extract frames, crop real face images, and generate deepfake-style face swaps using [SimSwap](https://github.com/neuralchen/SimSwap) â€” all through a simple web UI powered by Gradio.

---

## ğŸš€ Features So Far

- ğŸ“¹ Record or upload video via UI
- ğŸ”¼ï¸ Extract frames from the video
- ğŸ‘¤ Crop and save face images
- ğŸ§ª Generate deepfakes using SimSwap (via subprocess)
- ğŸ’» Gradio-based UI, modular backend

---

## ğŸ§¹ Project Structure

```bash
faceguard_ai/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ ui.py                 # Gradio interface logic
â”‚   â”œâ”€â”€ frame_extractor.py    # Frame extraction logic
â”‚   â”œâ”€â”€ face_cropper.py       # Face detection and cropping
â”‚   â”œâ”€â”€ simswap_runner.py     # Triggers SimSwap using subprocess
â”œâ”€â”€ run_app.py                # Launches the Gradio UI
â”œâ”€â”€ simswap_new/              # Cloned SimSwap repo
â”‚   â””â”€â”€ videos/               # Stores user videos (raw & re-encoded)
â”œâ”€â”€ faces/                    # Stores real and fake face images
â”‚   â””â”€â”€ <username>/
â”‚       â”œâ”€â”€ real/             # Cropped real face images
â”‚       â””â”€â”€ fake/             # Deepfake images generated by SimSwap
â”œâ”€â”€ frames/                   # Raw frames extracted from each video
â”œâ”€â”€ requirements-faceguard.txt
â”œâ”€â”€ requirements-simswap.txt
â””â”€â”€ README.md
```

---

## ğŸ“¦ Setup


### Create and activate two environments:

#### ğŸŸ© FaceGuard Env:
```bash
conda create -n faceguard python=3.9
conda activate faceguard
pip install -r requirements-faceguard.txt
```

#### ğŸŸ¦ SimSwap Env:
```bash
conda create -n simswap python=3.9
conda activate simswap
pip install -r requirements-simswap.txt
```

> ğŸ’¡ FFmpeg must be installed system-wide and available in your PATH.

---

## â–¶ï¸ How to Run

From the project root directory:

```bash
conda activate faceguard
python run_app.py
```

Then open your browser at:  
ğŸ“ `http://127.0.0.1:7860`

---

## ğŸ“‚ Where Output Files Are Stored

| Output Type      | Location                             | Description                              |
|------------------|--------------------------------------|------------------------------------------|
| ğŸ“¹ Raw Videos     | `simswap_new/videos/<user>/`         | Original + re-encoded videos              |
| ğŸ”¼ï¸ Extracted Frames | `frames/<user>/`                      | Every 5th frame from re-encoded video     |
| ğŸ‘¤ Real Faces     | `faces/<user>/real/`                 | Cropped faces detected from frames       |
| ğŸ§ª Fake Faces     | `faces/<user>/fake/`                 | SimSwap-generated deepfake images        |

---

## âœ… Notes

- Only videos with `.mp4` extension are supported (auto-re-encoded).
- SimSwap runs in a separate subprocess using the `simswap` environment.
- Identity images for face swaps should be placed in:
  ```
  simswap_new/utils/faceswap_identities/
  ```

---

## ğŸ› ï¸ Next Steps (Planned)

- ğŸ” Add real-vs-fake classification with Xception
- ğŸ“¸ Show fake image previews in the UI
- ğŸ§ª Train per-user anti-deepfake detector
- ğŸ—ƒï¸ Export user datasets (real + fake) in zip format

---

## ğŸ§  Credits

- SimSwap by [neuralchen](https://github.com/neuralchen/SimSwap)
- Face detection powered by MTCNN
- UI powered by Gradio

---

## ğŸ”’ Disclaimer

This project is for academic and research purposes only. Deepfake technology should always be used ethically and responsibly.
